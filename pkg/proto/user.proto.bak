syntax = "proto3";
package api;
import "common.proto";
import "google/api/annotations.proto";
option go_package = "gogogo/api;api";

// 用户服务模块
service User {
    // 登录或注册
    rpc Login (LoginRequest) returns (LoginResponse) {
        option (google.api.http) = {
            post: "/user"
            body: "*"
        };
    }
    // 获取用户列表
    rpc GetUserList (Empty) returns (GetUserListResponse) {
        option (google.api.http) = {
            get: "/user"
        };
    }
    // 删除用户
    rpc DelUser (DelUserRequest) returns (Empty) {
        option (google.api.http) = {
            delete: "/user"
        };
    }
    // 修改用户名
    rpc EditUserName (EditUserNameRequest) returns (Empty) {
        option (google.api.http) = {
            patch: "/user"
            body: "*"
        };
    }
}

message Empty {}

// 用户信息，该结构体和数据库表对应
message UserInfo {
    int32 id = 1;
    string userName = 2;
}

message LoginRequest {
    string userName = 1;
}

message LoginResponse {
    UserInfo user = 1;
}

message GetUserListResponse {
    repeated UserInfo userList = 1;
}

message DelUserRequest {
    int32 id = 1;
}

message EditUserNameRequest {
    int32 id = 1;
    string userName = 2;
}



// 用户职位服务模块
service UserJob {
    // 添加用户职位
    rpc AddUserJob (AddUserJobRequest) returns (AddUserJobResponse) {
        option (google.api.http) = {
            post: "/user/job"
            body: "*"
        };
    }
    // 获取用户职位列表
    rpc GetUserJobList (Empty) returns (GetUserJobListResponse) {
        option (google.api.http) = {
            get: "/user/job"
        };
    }
    // 删除用户职位
    rpc DelUserJob (DelUserJobRequest) returns (Empty) {
        option (google.api.http) = {
            delete: "/user/job"
        };
    }
    // 修改用户职位名
    rpc EditUserJobName (EditUserJobNameRequest) returns (Empty) {
        option (google.api.http) = {
            patch: "/user/job"
            body: "*"
        };
    }
}

// 用户职位信息，该结构体和数据库表对应
message UserJobInfo {
    int32 id = 1;
    string userJobName = 2;
}

message AddUserJobRequest {
    string userJobName = 1;
}

message AddUserJobResponse {
    UserJobInfo userJob = 1;
}

message GetUserJobListResponse {
    repeated UserJobInfo userJobList = 1;
}

message DelUserJobRequest {
    int32 id = 1;
}

message EditUserJobNameRequest {
    int32 id = 1;
    string userJobName = 2;
}
