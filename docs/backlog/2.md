刚开始做这个库时，思路大致是：

新增一个表，将首先用gorm-gen生成数据库代码；

自己写个工具，生成一致的protobuf结构体，以及最基本的CURD接口定义；

再通过protoc生成接口代码，最后用kratos提供服务。

---
然而最近了解到[sponge](https://github.com/zhufuyi/sponge/)这个库，基本上就是我想要的东西了。

而现在我自己写的CURD生成的工具还很粗糙，本来还打算慢慢迭代的，支持各个数据库的数据类型，支持复合键的查询接口，吧啦吧啦的。

接下来我们先试用sponge吧，依然还是同一个功能：

**“组织架构树”：一个用户，可以加入多个部门，在不同部门里分别担任不同的职位**

---
echo "export PATH=$PATH:/root/go/bin" > /etc/bashrc
echo "export PATH=$PATH:/root/go/bin" > /etc/profile

wget https://github.com/protocolbuffers/protobuf/releases/download/v28.1/protoc-28.1-linux-x86_64.zip
unzip protoc-28.1-linux-x86_64.zip
mv bin/protoc /usr/local/bin/
mv include/* /usr/local/include/

go install github.com/zhufuyi/sponge/cmd/sponge@latest
sponge init
sponge run --port=7050 --addr=http://0.0.0.0:7050

网页操作，通过pgsql已有的库生成代码，则service_user服务模块

cd service_user
make docs

make run
- 失败后先手动build
    - go build -o cmd/service_user/service_user cmd/service_user/main.go 
    - 报错1：user表对应代码生成了的注释不知道为什么换行了`// The name of /n the user`，手动先改改。原来是因为我user.sql定义了字段的描述，里面就包含了换行
    - 报错2：生成的代码里要求model.UserDeptAssoc有id列，则所有表都应该定义id自增列

- 修改端口8080->7060
    - 修改service_user/configs/service_user.yml
    - service_user/docs/swagger.yaml
    - service_user/docs/swagger.json
    - service_user/docs/docs.go
    - 好像没那么容易修改，应该都是用8080，然后通过docker来映射
    - 先放弃，还原，把“新手教程”跑通，再回头研究怎么改端口
    - 要研究make docs里面，哪里是源，哪些是生成的

关于git提交：根据上面步骤已经运行起来了基本代码，为了理解不同步骤所生成的代码，分几次提交代码
- 非sponse相关的代码，提交一次
- sponge init生成的内容，应该是“web服务”相关，提交一次
- 在ui生成代码，提交一次
- make docs后，提交一次


